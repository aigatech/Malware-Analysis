import logging
import os
import json

def setup_logging(job_id):
    log_dir = 'cfg_constructor/logs'
    os.makedirs(log_dir, exist_ok=True)
    log_file = os.path.join(log_dir, f'visualization_log_{job_id}.json')
    
    # Check if log file exists, if not create an empty one
    if not os.path.exists(log_file):
        with open(log_file, 'w') as f:
            json.dump({}, f)
    
    return log_file

def log_visualization(log_file, fname, vis_mode):
    with open(log_file, 'r+') as f:
        log_data = json.load(f)
        log_data[fname] = vis_mode
        f.seek(0)
        json.dump(log_data, f, indent=2)
        f.truncate()

def is_already_visualized(log_file, fname):
    with open(log_file, 'r') as f:
        log_data = json.load(f)
        return fname in log_data